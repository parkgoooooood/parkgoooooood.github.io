function renderCards(cards) {
  const grid = document.getElementById('cardGrid');
  grid.innerHTML = '';
  cards.forEach((card) => {
    const cardDiv = document.createElement('div');
    cardDiv.className = 'card';
    cardDiv.setAttribute('tabindex', '0');
    cardDiv.setAttribute('role', 'group');
    cardDiv.setAttribute('aria-label', `卡片：${card.name || '未命名'}`);

    // 图片
    const img = document.createElement('img');
    img.src = card.imgData;
    img.alt = card.name || '小卡图片';
    img.loading = 'lazy';
    cardDiv.appendChild(img);

    // 删除按钮（管理员才显示）
    if(isAdmin) {
      const delBtn = document.createElement('button');
      delBtn.className = 'delete-btn';
      delBtn.title = '删除此卡片';
      delBtn.setAttribute('aria-label', '删除此卡片');
      delBtn.innerHTML = '&times;';
      delBtn.addEventListener('click', async (e) => {
        e.stopPropagation();
        if(confirm('确定删除这张卡片吗？')) {
          await deleteCard(card.id);
          loadAndRenderCards();
        }
      });
      cardDiv.appendChild(delBtn);
    }

    // 名称显示，双击可编辑
    const nameDiv = document.createElement('div');
    nameDiv.className = 'card-name';
    nameDiv.textContent = card.name || '未命名';
    nameDiv.title = '双击修改名称';
    if (isAdmin) {
      nameDiv.setAttribute('contenteditable', 'false');

      // 单击阻止冒泡，避免触发图片放大
      nameDiv.addEventListener('click', (e) => {
        e.stopPropagation();
      });

      // 双击开启编辑
      nameDiv.addEventListener('dblclick', () => {
        nameDiv.setAttribute('contenteditable', 'true');
        nameDiv.focus();
        document.execCommand('selectAll', false, null);
      });

      // 失去焦点保存
      nameDiv.addEventListener('blur', async () => {
        nameDiv.setAttribute('contenteditable', 'false');
        const newName = nameDiv.textContent.trim() || '未命名';
        nameDiv.textContent = newName;
        await updateCardName(card.id, newName);
      });

      // 回车保存
      nameDiv.addEventListener('keydown', async (e) => {
        if(e.key === 'Enter') {
          e.preventDefault();
          nameDiv.blur();
        }
      });
    }
    cardDiv.appendChild(nameDiv);

    // 图片点击大图预览
    img.addEventListener('click', () => {
      currentCategoryCards = currentCategoryCards.length ? currentCategoryCards : [];
      currentIndex = currentCategoryCards.findIndex(c => c.id === card.id);
      if (currentIndex === -1) currentIndex = 0;
      openModal(currentIndex);
    });

    grid.appendChild(cardDiv);
  });
}